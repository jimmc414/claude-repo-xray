[
  {
    "method": "_do_execute_action",
    "line": 1788,
    "complexity": 31,
    "flow": [
      "-> action == NextAction.GENERATE_HYPOTHESIS?",
      "  -> action == NextAction.DESIGN_EXPERIMENT?",
      "    -> untested?",
      "      -> self.enable_concurrent and self.async_llm_client and len(...) > 1?",
      "        try:",
      "          -> evaluations?",
      "            * for eval_result in evaluations:",
      "              -> eval_result.get(...) == ...?",
      "        ! except Exception",
      "        ! except Exception",
      "    -> action == NextAction.EXECUTE_EXPERIMENT?",
      "      -> experiment_queue?",
      "        -> self.enable_concurrent and self.parallel_executor and len(...) > 1?",
      "      -> action == NextAction.ANALYZE_RESULT?",
      "        -> results?",
      "          -> self.enable_concurrent and self.async_llm_client and len(...) > 1?",
      "            try:",
      "              -> analyses?",
      "                * for analysis in analyses:",
      "                  -> result_id?",
      "            ! except Exception",
      "            ! except Exception",
      "        -> action == NextAction.REFINE_HYPOTHESIS?",
      "          -> tested?",
      "          {self._actions_this_iteration}",
      "          -> action == NextAction.CONVERGE?",
      "            -> action == NextAction.PAUSE?"
    ],
    "side_effects": [],
    "inputs": [],
    "state_mutations": [
      "self._actions_this_iteration"
    ],
    "conditions": [
      "action == NextAction.GENERATE_HYPOTHESIS",
      "action == NextAction.DESIGN_EXPERIMENT",
      "untested",
      "self.enable_concurrent and self.async_llm_client and len(...) > 1",
      "evaluations",
      "eval_result.get(...) == ...",
      "action == NextAction.EXECUTE_EXPERIMENT",
      "experiment_queue",
      "self.enable_concurrent and self.parallel_executor and len(...) > 1",
      "action == NextAction.ANALYZE_RESULT",
      "results",
      "self.enable_concurrent and self.async_llm_client and len(...) > 1",
      "analyses",
      "result_id",
      "action == NextAction.REFINE_HYPOTHESIS",
      "tested",
      "action == NextAction.CONVERGE",
      "action == NextAction.PAUSE"
    ],
    "signature": null,
    "docstring": null,
    "file": "kosmos/agents/research_director.py",
    "priority_score": 0.667
  },
  {
    "method": "decide_next_action",
    "line": 1603,
    "complexity": 23,
    "flow": [
      "try:",
      "  -> metrics.budget_enabled?",
      "  -> Return(NextAction.CONVERGE)",
      "! except BudgetExceededError",
      "! except ImportError",
      "-> self._check_runtime_exceeded(...)?",
      "  -> Return(NextAction.CONVERGE)",
      "-> not hasattr(...)?",
      "  {self._actions_this_iteration}",
      "-> self._actions_this_iteration > MAX_ACTIONS_PER_ITERATION?",
      "  -> Return(NextAction.CONVERGE)",
      "-> self._should_check_convergence(...)?",
      "  -> Return(NextAction.CONVERGE)",
      "-> current_state == WorkflowState.GENERATING_HYPOTHESES?",
      "  -> Return(NextAction.GENERATE_HYPOTHESIS)",
      "  -> current_state == WorkflowState.DESIGNING_EXPERIMENTS?",
      "    -> untested?",
      "      -> Return(NextAction.DESIGN_EXPERIMENT)",
      "      -> self.research_plan.experiment_queue?",
      "        -> Return(NextAction.EXECUTE_EXPERIMENT)",
      "        -> self.research_plan.results?",
      "          -> Return(NextAction.ANALYZE_RESULT)",
      "          -> Return(NextAction.CONVERGE)",
      "    -> current_state == WorkflowState.EXECUTING?",
      "      -> self.research_plan.experiment_queue?",
      "        -> Return(NextAction.EXECUTE_EXPERIMENT)",
      "        -> self.research_plan.results?",
      "          -> Return(NextAction.ANALYZE_RESULT)",
      "          -> Return(NextAction.REFINE_HYPOTHESIS)",
      "      -> current_state == WorkflowState.ANALYZING?",
      "        -> not self.research_plan.results?",
      "          -> self.research_plan.experiment_queue?",
      "            -> Return(NextAction.EXECUTE_EXPERIMENT)",
      "            -> Return(NextAction.REFINE_HYPOTHESIS)",
      "        -> Return(NextAction.ANALYZE_RESULT)",
      "        -> current_state == WorkflowState.REFINING?",
      "          -> self.research_plan.tested_hypotheses?",
      "            -> Return(NextAction.REFINE_HYPOTHESIS)",
      "            -> Return(NextAction.GENERATE_HYPOTHESIS)",
      "          -> current_state == WorkflowState.CONVERGED?",
      "            -> Return(NextAction.CONVERGE)",
      "            -> current_state == WorkflowState.ERROR?",
      "              -> Return(NextAction.ERROR_RECOVERY)",
      "              -> Return(NextAction.GENERATE_HYPOTHESIS)"
    ],
    "side_effects": [],
    "inputs": [],
    "state_mutations": [
      "self._actions_this_iteration"
    ],
    "conditions": [
      "metrics.budget_enabled",
      "self._check_runtime_exceeded(...)",
      "not hasattr(...)",
      "self._actions_this_iteration > MAX_ACTIONS_PER_ITERATION",
      "self._should_check_convergence(...)",
      "current_state == WorkflowState.GENERATING_HYPOTHESES",
      "current_state == WorkflowState.DESIGNING_EXPERIMENTS",
      "untested",
      "self.research_plan.experiment_queue",
      "self.research_plan.results",
      "current_state == WorkflowState.EXECUTING",
      "self.research_plan.experiment_queue",
      "self.research_plan.results",
      "current_state == WorkflowState.ANALYZING",
      "not self.research_plan.results",
      "self.research_plan.experiment_queue",
      "current_state == WorkflowState.REFINING",
      "self.research_plan.tested_hypotheses",
      "current_state == WorkflowState.CONVERGED",
      "current_state == WorkflowState.ERROR"
    ],
    "signature": null,
    "docstring": null,
    "file": "kosmos/agents/research_director.py",
    "priority_score": 0.667
  },
  {
    "method": "execute",
    "line": 148,
    "complexity": 23,
    "flow": [
      "-> language is None?",
      "  -> R_EXECUTOR_AVAILABLE and self.r_executor?",
      "-> language == ...?",
      "  -> Return(self._execute_r(...))",
      "* while attempt < ...:",
      "  try:",
      "    -> result.success?",
      "      -> current_code != code and attempt > 1?",
      "      -> Return(result)",
      "      -> retry_on_error and attempt < self.max_retries?",
      "        -> fixed_code and fixed_code != current_code?",
      "        -> current_code != code?",
      "        -> Return(result)",
      "    -> retry_on_error and attempt < self.max_retries?",
      "      -> fixed_code and fixed_code != current_code?",
      "      -> Return(ExecutionResult(...))",
      "  ! except Exception",
      "-> Return(ExecutionResult(...))"
    ],
    "side_effects": [],
    "inputs": [],
    "state_mutations": [],
    "conditions": [
      "language is None",
      "R_EXECUTOR_AVAILABLE and self.r_executor",
      "language == ...",
      "result.success",
      "current_code != code and attempt > 1",
      "retry_on_error and attempt < self.max_retries",
      "fixed_code and fixed_code != current_code",
      "current_code != code",
      "retry_on_error and attempt < self.max_retries",
      "fixed_code and fixed_code != current_code"
    ],
    "signature": null,
    "docstring": null,
    "file": "kosmos/execution/executor.py",
    "priority_score": 0.452
  },
  {
    "method": "modify_code_for_retry",
    "line": 692,
    "complexity": 18,
    "flow": [
      "-> llm_client and attempt <= 2?",
      "  try:",
      "    -> fixed and fixed != original_code?",
      "      -> Return(fixed)",
      "  ! except Exception",
      "-> ... in error_type?",
      "  -> Return(self._fix_key_error(...))",
      "  -> ... in error_type?",
      "    -> Return(self._fix_file_not_found(...))",
      "    -> ... in error_type?",
      "      -> Return(self._fix_name_error(...))",
      "      -> ... in error_type?",
      "        -> Return(self._fix_type_error(...))",
      "        -> ... in error_type?",
      "          -> Return(self._fix_index_error(...))",
      "          -> ... in error_type?",
      "            -> Return(self._fix_attribute_error(...))",
      "            -> ... in error_type?",
      "              -> Return(self._fix_value_error(...))",
      "              -> ... in error_type?",
      "                -> Return(self._fix_zero_division(...))",
      "                -> ... in error_type or ... in error_type?",
      "                  -> Return(self._fix_import_error(...))",
      "                  -> ... in error_type?",
      "                    -> Return(self._fix_permission_error(...))",
      "                    -> ... in error_type?",
      "                      -> Return(self._fix_memory_error(...))",
      "-> Return(None)"
    ],
    "side_effects": [],
    "inputs": [],
    "state_mutations": [],
    "conditions": [
      "llm_client and attempt <= 2",
      "fixed and fixed != original_code",
      "... in error_type",
      "... in error_type",
      "... in error_type",
      "... in error_type",
      "... in error_type",
      "... in error_type",
      "... in error_type",
      "... in error_type",
      "... in error_type or ... in error_type",
      "... in error_type",
      "... in error_type"
    ],
    "signature": null,
    "docstring": null,
    "file": "kosmos/execution/executor.py",
    "priority_score": 0.452
  },
  {
    "method": "generate",
    "line": 206,
    "complexity": 35,
    "flow": [
      "try:",
      "  -> model_override?",
      "    -> self.enable_auto_model_selection and not self.is_cli_mode?",
      "      -> complexity_analysis[...] == ...?",
      "      -> ... in selected_model.lower(...)?",
      "        -> ... in selected_model.lower(...)?",
      "  -> self.cache and not bypass_cache?",
      "    -> cached_response is not None?",
      "      -> Return(response_text)",
      "  -> hasattr(...) and response.usage?",
      "    -> hasattr(...)?",
      "    -> hasattr(...)?",
      "  -> stop_reason == ...?",
      "  -> self.cache and not bypass_cache?",
      "    -> hasattr(...) and response.usage?",
      "      -> hasattr(...) and hasattr(...)?",
      "  -> Return(text)",
      "! except Exception"
    ],
    "side_effects": [],
    "inputs": [],
    "state_mutations": [],
    "conditions": [
      "model_override",
      "self.enable_auto_model_selection and not self.is_cli_mode",
      "complexity_analysis[...] == ...",
      "... in selected_model.lower(...)",
      "... in selected_model.lower(...)",
      "self.cache and not bypass_cache",
      "cached_response is not None",
      "hasattr(...) and response.usage",
      "hasattr(...)",
      "hasattr(...)",
      "stop_reason == ...",
      "self.cache and not bypass_cache",
      "hasattr(...) and response.usage",
      "hasattr(...) and hasattr(...)"
    ],
    "signature": null,
    "docstring": null,
    "file": "kosmos/core/llm.py",
    "priority_score": 0.425
  },
  {
    "method": "get_client",
    "line": 612,
    "complexity": 9,
    "flow": [
      "-> _default_client is not None and not reset?",
      "  -> Return(_default_client)",
      "-> _default_client is not None and not reset?",
      "  -> Return(_default_client)",
      "-> _default_client is None or reset?",
      "  -> use_provider_system?",
      "    try:",
      "    ! except Exception",
      "-> Return(_default_client)"
    ],
    "side_effects": [],
    "inputs": [],
    "state_mutations": [],
    "conditions": [
      "_default_client is not None and not reset",
      "_default_client is not None and not reset",
      "_default_client is None or reset",
      "use_provider_system"
    ],
    "signature": null,
    "docstring": null,
    "file": "kosmos/core/llm.py",
    "priority_score": 0.425
  },
  {
    "method": "_inject_attributes_to_nodes",
    "line": 116,
    "complexity": 42,
    "flow": [
      "* while parent:",
      "  -> parent.nodeType == parent.ELEMENT_NODE and parent.tagName == ...?",
      "    -> Return(True)",
      "-> Return(False)",
      "-> not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> is_inside_deletion(...)?",
      "  -> not elem.hasAttribute(...)?",
      "  -> not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> elem.tagName in (...) and not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> not elem.hasAttribute(...)?",
      "-> elem.firstChild and elem.firstChild.nodeType == elem.firstChild.TEXT_NODE?",
      "  -> text and text[...].isspace(...) or text[...].isspace(...)?",
      "    -> not elem.hasAttribute(...)?",
      "* for node in nodes:",
      "  -> node.nodeType != node.ELEMENT_NODE?",
      "  -> node.tagName == ...?",
      "    -> node.tagName == ...?",
      "      -> node.tagName == ...?",
      "        -> node.tagName in (...)?",
      "          -> node.tagName == ...?",
      "            -> node.tagName == ...?",
      "  * for elem in node.getElementsByTagName(...):",
      "  * for elem in node.getElementsByTagName(...):",
      "  * for elem in node.getElementsByTagName(...):",
      "  * for tag in (...):",
      "    * for elem in node.getElementsByTagName(...):",
      "  * for elem in node.getElementsByTagName(...):",
      "  * for elem in node.getElementsByTagName(...):"
    ],
    "side_effects": [],
    "inputs": [],
    "state_mutations": [],
    "conditions": [
      "parent.nodeType == parent.ELEMENT_NODE and parent.tagName == ...",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "is_inside_deletion(...)",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "elem.tagName in (...) and not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "elem.firstChild and elem.firstChild.nodeType == elem.firstChild.TEXT_NODE",
      "text and text[...].isspace(...) or text[...].isspace(...)",
      "not elem.hasAttribute(...)",
      "node.nodeType != node.ELEMENT_NODE",
      "node.tagName == ...",
      "node.tagName == ...",
      "node.tagName == ...",
      "node.tagName in (...)",
      "node.tagName == ...",
      "node.tagName == ..."
    ],
    "signature": null,
    "docstring": null,
    "file": "kosmos-claude-scientific-skills/scientific-skills/document-skills/docx/scripts/document.py",
    "priority_score": 0.416
  },
  {
    "method": "suggest_deletion",
    "line": 482,
    "complexity": 22,
    "flow": [
      "-> elem.nodeName == ...?",
      "  -> elem.getElementsByTagName(...)?",
      "  * for t_elem in list(...):",
      "    * while t_elem.firstChild:",
      "    * for i in range(...):",
      "  -> elem.hasAttribute(...)?",
      "    -> not elem.hasAttribute(...)?",
      "  -> Return(del_wrapper)",
      "  -> elem.nodeName == ...?",
      "    -> elem.getElementsByTagName(...) or elem.getElementsByTagName(...)?",
      "    -> is_numbered?",
      "      -> not rPr_list?",
      "    * for t_elem in list(...):",
      "      * while t_elem.firstChild:",
      "      * for i in range(...):",
      "    * for run in elem.getElementsByTagName(...):",
      "      -> run.hasAttribute(...)?",
      "        -> not run.hasAttribute(...)?",
      "    * for child in ...:",
      "    -> Return(elem)"
    ],
    "side_effects": [],
    "inputs": [],
    "state_mutations": [],
    "conditions": [
      "elem.nodeName == ...",
      "elem.getElementsByTagName(...)",
      "elem.hasAttribute(...)",
      "not elem.hasAttribute(...)",
      "elem.nodeName == ...",
      "elem.getElementsByTagName(...) or elem.getElementsByTagName(...)",
      "is_numbered",
      "not rPr_list",
      "run.hasAttribute(...)",
      "not run.hasAttribute(...)"
    ],
    "signature": null,
    "docstring": null,
    "file": "kosmos-claude-scientific-skills/scientific-skills/document-skills/docx/scripts/document.py",
    "priority_score": 0.416
  },
  {
    "method": "analyze_corpus",
    "line": 658,
    "complexity": 13,
    "flow": [
      "-> not papers?",
      "  -> Return(analysis)",
      "* for paper in papers:",
      "  -> paper.year?",
      "-> self.extract_concepts?",
      "  * for paper in papers[...]:",
      "    try:",
      "      * for concept in extraction.concepts:",
      "    ! except Exception",
      "-> generate_insights?",
      "  try:",
      "    [DB: analysis.update(...)]",
      "  ! except Exception",
      "-> Return(analysis)"
    ],
    "side_effects": [
      "DB: analysis.update(...)"
    ],
    "inputs": [],
    "state_mutations": [],
    "conditions": [
      "not papers",
      "paper.year",
      "self.extract_concepts",
      "generate_insights"
    ],
    "signature": null,
    "docstring": null,
    "file": "kosmos/agents/literature_analyzer.py",
    "priority_score": 0.397
  },
  {
    "method": "find_related_papers",
    "line": 574,
    "complexity": 12,
    "flow": [
      "-> self.use_semantic_similarity?",
      "  try:",
      "    * for result in similar:",
      "      -> result[...] >= similarity_threshold?",
      "  ! except Exception",
      "-> self.use_knowledge_graph and self.knowledge_graph?",
      "  try:",
      "    * for item in graph_related:",
      "  ! except Exception",
      "* for item in related:",
      "  -> paper_id not in seen_ids?",
      "-> Return(unique_related[...])"
    ],
    "side_effects": [],
    "inputs": [],
    "state_mutations": [],
    "conditions": [
      "self.use_semantic_similarity",
      "result[...] >= similarity_threshold",
      "self.use_knowledge_graph and self.knowledge_graph",
      "paper_id not in seen_ids"
    ],
    "signature": null,
    "docstring": null,
    "file": "kosmos/agents/literature_analyzer.py",
    "priority_score": 0.397
  }
]